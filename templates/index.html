<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Bootstrap 101 Template</title>
      <link href="{{ static_url("css/bootstrap.min.css") }}" rel="stylesheet">
      <script src="{{ static_url("js/jquery.min.js") }}" type="text/javascript"></script>
      <script>
        var wsocket = new WebSocket("ws://161.246.5.32:8888/ws");

    
        wsocket.onopen = function(){
          var temp1 = $("#ip").text();
          var temp2 = "open ";
          var ip_msg = temp2.concat(temp1);
          wsocket.send(ip_msg);  
          console.log("connected"); 
        }; 
 
        wsocket.onmessage = function (message) {
          console.log("receiving: " + message.data);
        };
 
        wsocket.onclose = function(){
          console.log("disconnected"); 
        };
 
        sendMsg = function(message) {
          wsocket.send(message);
        };
      </script>
    </head>
    <body>
      <a href="/account">account</a>
      <a href="/setplayer">select player</a>
      <a href="/auth/logout">logout</a>
      <h1>Hello, {{user}}</h1>
      <h3>IP : {{player_ip}}</h3>
      <div hidden id = "ip" >{{player_ip}}</div>

      test data <input type="text" id="var" >
      <button id = "play"  > play</button>

      <button name="previous" value="previous" onclick="OnClick('previous')"> previous</button>
      <button name="play_pause" value="play_pause" onclick="OnClick('play_pause')"> Play/Pause</button>
      <button name="next" value="next" onclick="OnClick('next')"> next </button>

      <a href="/playlist"><button>playlist</button> </a>

      <a href="/playlist">playlist </a>


      
      <br>

      <form name ='playlist_list' id ='playlist_list'>
        <select name='playlist_name'>
          {% for playlist in playlists%}
            <option value='"{{playlist.playlist_name}}"'>{{playlist.playlist_name}}</option>
          {%end%}
        </select>
        <input type="submit" id="load_playlist" value="load">
        <input type="submit" id="edit_playlist" value="edit">
        </form>


        <br>
      <!--  <form method="post" action="/playlist/add"><input type="text" name="new_playlist_name"><input type="submit" value="add" action="/playlist/add" method="post"></form>
        <script> $("#load_playlist").click(function(){$("#playlist_list").attr("action","/playlist");$("#playlist_list").attr("method","post");$("#playlist_list").submit();}); </script>
        <script> $("#edit_playlist").click(function(){$("#playlist_list").attr("action","/playlist/edit");$("#playlist_list").attr("method","get");$("#playlist_list").submit();}); </script> -->


      <script src="{{ static_url("js/jquery.min.js") }}"></script>
      <script src="{{ static_url("js/bootstrap.min.js") }}"></script>
      <script type="text/javascript">
        $('#play').click(function(){
          var song = $("#var").val();
          var play = "#play ";
          var res = play.concat(song);
          sendMsg(res);  
        });

        function OnClick(value){
          sendMsg(value);
        }
      </script>
    </body>
</html>